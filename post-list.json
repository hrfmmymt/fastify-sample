[
  {
    "title": "handle 404",
    "description": "wei",
    "date": "2021-09-01",
    "url": "hande-404",
    "html": "<h1 id=\"handle-404\">handle 404</h1>\n<p><time datetime=\"2021-09-01\">2021-09-01</time></p>\n<p><em class=\"description\">wei</em></p>\n<p>vercel デプロイ時、↓で 404 のハンドリングができず 500 が返ってしまってた ( ローカルだとOK )。</p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">try</span> {\n  fs.<span class=\"hljs-title function_\">statSync</span>(filePath);\n} <span class=\"hljs-keyword\">catch</span> (error) {\n  <span class=\"hljs-keyword\">if</span> (error.<span class=\"hljs-property\">code</span> === <span class=\"hljs-string\">&#x27;ENOENT&#x27;</span>) {\n    reply.<span class=\"hljs-title function_\">code</span>(<span class=\"hljs-number\">404</span>).<span class=\"hljs-title function_\">view</span>(<span class=\"hljs-string\">&#x27;./templates/page/404.njk&#x27;</span>);\n  }\n}\n\n<span class=\"hljs-title function_\">getPostInfo</span>({ fileName, <span class=\"hljs-attr\">withHtml</span>: <span class=\"hljs-literal\">true</span> }).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">postInfo</span>) =&gt;</span> {\n...\n</code></pre>\n<p>↓で解決。</p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">if</span> (fs.<span class=\"hljs-title function_\">existsSync</span>(filePath)) {\n  <span class=\"hljs-title function_\">getPostInfo</span>({ fileName, <span class=\"hljs-attr\">withHtml</span>: <span class=\"hljs-literal\">true</span> }).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">postInfo</span>) =&gt;</span> {\n  ...\n} <span class=\"hljs-keyword\">else</span> {\n  reply.<span class=\"hljs-title function_\">code</span>(<span class=\"hljs-number\">404</span>).<span class=\"hljs-title function_\">view</span>(<span class=\"hljs-string\">&#x27;./templates/page/404.njk&#x27;</span>);\n}\n</code></pre>\n"
  },
  {
    "title": "ESM対応への懸念",
    "description": "esm",
    "date": "2021-08-30",
    "url": "ESM%E5%AF%BE%E5%BF%9C%E3%81%B8%E3%81%AE%E6%87%B8%E5%BF%B5",
    "html": "<h1 id=\"esm対応への懸念\">ESM対応への懸念</h1>\n<p><time datetime=\"2021-08-30\">2021-08-30</time></p>\n<p><em class=\"description\">esm</em></p>\n<h2 id=\"imagemin\">imagemin</h2>\n<p>画像の最適化で使っている imagemin 最新 ver. が ESM を使っているので、対応しなければならない。\n<a href=\"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c\">対応方法</a></p>\n<h2 id=\"懸念\">懸念</h2>\n<ul>\n<li>他の既存コードの修正がめんどくさそう<ul>\n<li>TS のとことか</li>\n<li>他の pkg は？</li>\n</ul>\n</li>\n<li>Vercel でのデプロイ</li>\n</ul>\n<h2 id=\"まあでも今後を考えるとやった方がよい\">まあでも今後を考えるとやった方がよい</h2>\n"
  },
  {
    "title": "hello, world!",
    "description": "hello,",
    "date": "2021-08-29",
    "url": "hello-world!",
    "html": "<h1 id=\"hello-world\">hello, world!</h1>\n<p><time datetime=\"2021-08-29\">2021-08-29</time></p>\n<p><em class=\"description\">hello, world!</em></p>\n<p>aaaaaaaaaaa</p>\n<h2 id=\"img\">img</h2>\n<p><picture>\n      <source srcset=\"public/img/post/webp/20210829_01.webp\" type=\"image/webp\">\n      <source srcset=\"public/img/post/20210829_01.jpg\" type=\"image/jpeg\">\n      <img src=\"public/img/post/20210829_01.jpg\" alt=\"eye-catch\" width=\"780\" height=\"1040\" />\n    </picture></p>\n<h2 id=\"youtube\">youtube</h2>\n<h2 id=\"soundcloud\">soundcloud</h2>\n<h2 id=\"instagram\">instagram</h2>\n<h2 id=\"video\">video</h2>\n<pre><code class=\"language-html\">&lt;div class=&quot;video-wrapper&quot;&gt;\n  &lt;video controls\n    preload=&quot;metadata&quot;\n    width=&quot;640&quot;\n    height=&quot;360&quot;\n    poster=&quot;public/videos/poster/test.png&quot;\n    title=&quot;video-test&quot;&gt;\n    &lt;source src=&quot;public/videos/webm/test.webm&quot;\n      type=&quot;video/webm&quot; /&gt;\n    &lt;source src=&quot;public/videos/test.mp4&quot;\n      type=&quot;video/mp4&quot; /&gt;\n    &lt;div fallback&gt;\n      &lt;p&gt;This browser does not support the video element.&lt;/p&gt;\n    &lt;/div&gt;\n  &lt;/video&gt;\n&lt;/div&gt;\n</code></pre>\n<div class=\"video-wrapper\">\n  <video controls\n    preload=\"metadata\"\n    width=\"640\"\n    height=\"360\"\n    layout=\"responsive\"\n    poster=\"public/videos/poster/test.png\"\n    title=\"video-test\">\n    <source src=\"public/videos/webm/test.webm\"\n      type=\"video/webm\" />\n    <source src=\"public/videos/test.mp4\"\n      type=\"video/mp4\" />\n    <div fallback>\n      This browser does not support the video element.\n    </div>\n  </video>\n</div>\n\n<pre><code class=\"language-sh\">![video-test](public/videos/test.mp4=640x360)\n</code></pre>\n<p><div class=\"video-wrapper\">\n        <video controls preload=\"metadata\" width=\"640\" height=\"360\" poster=\"public/videos/poster/test.png\" title=\"video-test\">\n          <source src=\"public/videos/webm/test.webm\" type=\"video/webm\" />\n          <source src=\"public/videos/test.mp4\" type=\"video/mp4\" />\n          <div fallback>This browser does not support the video element.</div>\n        </video>\n      </div></p>\n<pre><code class=\"language-html\">&lt;iframe src=&quot;https://open.spotify.com/embed/user/hrfmmymt/playlist/4rmnvhEv080DI0AX0XqfqD&quot;\n  sandbox=&quot;allow-scripts allow-same-origin&quot;\n  width=&quot;300&quot;\n  height=&quot;380&quot;\n  frameborder=&quot;0&quot;\n  allow=&quot;encrypted-media&quot;&gt;&lt;/iframe&gt;\n</code></pre>\n<iframe src=\"https://open.spotify.com/embed/user/hrfmmymt/playlist/4rmnvhEv080DI0AX0XqfqD\"\n  sandbox=\"allow-scripts allow-same-origin\"\n  width=\"300\"\n  height=\"380\"\n  frameborder=\"0\"\n  allow=\"encrypted-media\"></iframe>"
  },
  {
    "title": "0",
    "description": "enable",
    "date": "1999-09-11",
    "url": "0",
    "html": "<h1 id=\"0\">0</h1>\n<p><time datetime=\"1999-09-11\">1999-09-11</time></p>\n<p><em class=\"description\">enable sort</em></p>\n<h2 id=\"h2\">h2</h2>\n<p>0000000</p>\n"
  },
  {
    "title": "h1",
    "description": "wei",
    "date": "1999-09-09",
    "url": "1",
    "html": "<h1 id=\"h1\">h1</h1>\n<p><time datetime=\"1999-09-09\">1999-09-09</time></p>\n<p><em class=\"description\">wei</em></p>\n<h2 id=\"h2\">h2</h2>\n<pre><code class=\"language-javascript\">marked.<span class=\"hljs-title function_\">setOptions</span>({\n  <span class=\"hljs-attr\">renderer</span>: <span class=\"hljs-keyword\">new</span> marked.<span class=\"hljs-title class_\">Renderer</span>(),\n  <span class=\"hljs-attr\">highlight</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">code, lang</span>) {\n    <span class=\"hljs-keyword\">const</span> hljs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;highlight.js&#x27;</span>)\n    <span class=\"hljs-keyword\">const</span> language = hljs.<span class=\"hljs-title function_\">getLanguage</span>(lang) ? lang : <span class=\"hljs-string\">&#x27;plaintext&#x27;</span>\n    <span class=\"hljs-keyword\">return</span> hljs.<span class=\"hljs-title function_\">highlight</span>(code, { language }).<span class=\"hljs-property\">value</span>\n  },\n  <span class=\"hljs-attr\">pedantic</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">gfm</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">breaks</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">sanitize</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">smartLists</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">smartypants</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">xhtml</span>: <span class=\"hljs-literal\">false</span>\n})\n<span class=\"hljs-comment\">// https://marked.js.org/using_advanced</span>\n</code></pre>\n<ul>\n<li>list1</li>\n<li>list2</li>\n</ul>\n"
  }
]